#include<iostream>
using namespace std;
int f[2000][2000];
char s[1000][2000];
int a[1000];
int main()
{
    int T,n,m;
    scanf("%d",&T);
    char ch;
    while( T-- )
    {
        scanf("%d%d",&n,&m);
        for(int i=0;i<n;i++)
        {
           for(int j=0;j<2*m-1;j+=2)
            {
                cin>>s[j];
            }
        }
        for(i=0;i<2*m-1;i+=2)
            if(s[0]=='F')f[0]=1;
            else f[0]=0;
            for(i=1;i<n;i++)
                for(int j=0;j<2*m-1;j+=2)
                {
                    if(s[j]=='F')f[j]=f[i-1][j]+1;
                    else f[j]=0;
                }
                int max=0,temp,tn;
                for(i=0;i<n;i++)
                    for(int j=0;j<2*m-1;j+=2)
                    {
                        if(s[j]=='F')
                        {
                            temp=f[j],tn=0;
                            if(j==0)
                            {
                                if(f[j]>max)max=f[j];
                                continue;
                            }
                            for(int t=j-2;t>=0;t-=2)
                            {
                                if(f[t]==0)break;
                                if(f[t]<temp)
                                {
                                    a[tn++]=( (j-t)/2 )*temp;
                                    temp=f[t];
                                }
                            }
                           if(t<0)a[tn++]=( j/2 + 1 )*temp;
                            else a[tn++]=( (j-t)/2 ) *temp;
                            for(t=0;t<tn;t++)
                                if(a[t]>max)max=a[t];
                        }
                    }
                    printf("%d\n",max*3);
    }
}